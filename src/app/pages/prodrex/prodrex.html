<ion-header translucent="true">
  <ion-toolbar>
    <ion-buttons *ngIf="!showSearchbar" slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-searchbar
      placeholder="Buscar"
      (ionInput)="onSearch($event.target.value)">
    </ion-searchbar>
    <ion-buttons slot="end">
      <ion-button *ngIf="!showSearchbar" (click)="presentFilter()">
        <span *ngIf="ios">Filter</span>
        <span *ngIf="!ios">
          <ion-icon slot="icon-only" name="options"></ion-icon>
        </span>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>

  <ion-toolbar color="light" class="subheader-toolbar">
    <ion-title class="subheader-title">
      Movimientos | Salida de mercancia <br><br>
      <span style= "font-size:xx-small;padding-bottom:5px ;">
        <i>{{todayDate}}</i>
      </span>
    </ion-title>
  </ion-toolbar>

</ion-header>

<ion-content>
  <ion-list>
    <ng-container *ngFor="let p of productList">
      <ion-item button (click)="addToOrder(p)" lines="none" style="padding-top: 6px; padding-bottom: 6px;">
        <table style="width: 100%; border-collapse: collapse;">
          <!-- Primera fila: Categoría, Nombre, Cantidad + UM, Botón -->
          <tr>
            <td style="font-size: small; width: 10%;">
              {{ getCategoryNameById(p?.datos?.categ?.[0]) | capitalize }}
            </td>
            <td style="font-size: 13px; width: 60%;">
              <h3 style="margin: 0; font-size: inherit;">{{ p?.datos?.name | uppercase }}</h3>
            </td>
            <td style="width: 15%; text-align: right; vertical-align: top;">
              <div style="display: flex; flex-direction: column; align-items: flex-end;">
                <strong>{{ p?.datos?.qty }}</strong>
                <span style="font-size: xx-small;">{{ getUmNameById(p?.datos?.um?.[0]) }}</span>
              </div>
            </td>

            <!-- Botón -->
            <td style="width: 15%; text-align: center;">
              <ion-button color="secondary" (click)="printSelectedBarcodes(p); $event.stopPropagation()" style="height: 28px; min-width: 28px;">
                <ion-icon name="trash-outline"></ion-icon>
              </ion-button>
            </td>
          </tr>
        </table>
      </ion-item>
    </ng-container>
  </ion-list>
</ion-content>







